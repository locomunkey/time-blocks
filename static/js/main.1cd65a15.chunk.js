(this.webpackJsonpinterrupts=this.webpackJsonpinterrupts||[]).push([[0],{18:function(e,t,n){"use strict";var a=n(0),r=n.n(a).a.createContext({});t.a=r},33:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a={Unexpected:"Something went wrong",PasswordMismatch:"Please make sure the passwords match",InvalidLogin:"Invalid login. Please try again",FatalError:"Fatal error"}},34:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(1),s=n(35),i=function(e){var t=e.progressPercent,n=e.marks;return r.a.createElement("div",{style:{position:"relative",height:13,width:13,marginRight:2,marginTop:2,backgroundColor:"gray"}},r.a.createElement("div",{style:{width:"".concat(Math.max(Math.ceil(t),3),"%"),backgroundColor:"rgb(97,196,85)",height:"100%"}}),n&&n.map((function(e){return r.a.createElement("div",{style:{position:"absolute",left:"".concat(e,"%"),height:"100%",width:2,top:0,backgroundColor:"red"}})})))},l=function(e){return 100-(60*e.hours+e.minutes+e.seconds/60)/60*100},c=function(e){var t=e.block,n=e.isGoal;return t&&!t.completed?r.a.createElement(i,{progressPercent:l(t),isGoal:n}):r.a.createElement(o.a,{style:{width:13,height:13,marginRight:2,marginTop:2,backgroundColor:t?"rgb(97,196,85)":"gray"}})};t.a=function(e){var t=e.earnedBlocks,n=e.currentBlock,a=e.goal,i=Math.max(s.a.getTodaysBlockGoal(a)-t.length-(n?1:0),0);return r.a.createElement(o.a,{style:{display:"flex",flexWrap:"wrap",flexDirection:"row"}},t.map((function(e){return r.a.createElement(c,{block:e})})),n&&r.a.createElement(c,{block:n,isGoal:i-1>0}),Array.from(new Array(i)).map((function(){return r.a.createElement(c,{isGoal:!0})})))}},35:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(6),r=n(3),o=n(8),s=n(5),i=n.n(s),l=function(){function e(){Object(r.a)(this,e)}return Object(o.a)(e,null,[{key:"getTodaysBlockGoal",value:function(e){if(!e)return 0;var t=e;null!==e.everyday&&(t=Object(a.a)({},t,{mon:e.everyday,tue:e.everyday,wed:e.everyday,thu:e.everyday,fri:e.everyday,sat:e.everyday,sun:e.everyday})),null!==e.weekdays&&(t=Object(a.a)({},t,{mon:e.weekdays,tue:e.weekdays,wed:e.weekdays,thu:e.weekdays,fri:e.weekdays})),null!==e.weekends&&(t=Object(a.a)({},t,{sat:e.weekends,sun:e.weekends}));var n=i()().format("ddd").toLowerCase(),r=parseInt(t[n]);return isNaN(r)?0:r}}]),e}()},63:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return g}));var a=n(3),r=n(8),o=n(9),s=n(10),i=n(0),l=n.n(i),c=n(18),u=n(11),d=n(83),m=n(33),h=function(t){Object(s.a)(i,t);var n=Object(o.a)(i);function i(){var t;Object(a.a)(this,i);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(t=n.call.apply(n,[this].concat(o))).firebase=e.firebase,t.state={error:null},t._onSignup=function(e,n){var a=t.props.authService;0!==e.length&&0!==n.length&&a&&a.signUp(e,n,t._goToHome,(function(e){return t.setState({error:e})}))},t._onSignin=function(e,n){var a=t.props.authService;console.log(">>>> signdnfjsn",a),a&&a.signIn(e,n,t._goToHome,(function(){return t.setState({error:m.a.InvalidLogin})}))},t._goToHome=function(){var e=t.props.history;e||t.setState({error:m.a.FatalError}),e.replace("/")},t}return Object(r.a)(i,[{key:"render",value:function(){var e=this.state.error;return l.a.createElement(d.a,{onSignup:this._onSignup,onSignin:this._onSignin,error:e})}}]),i}(l.a.Component),g=function(e){var t=Object(u.g)();return l.a.createElement(c.a,null,(function(n){var a=n.authService;return l.a.createElement(h,Object.assign({},e,{authService:a,history:t}))}))}}).call(this,n(56))},64:function(e,t,n){"use strict";(function(e){var a=n(8),r=n(9),o=n(10),s=n(48),i=n(2),l=n.n(i),c=n(6),u=n(14),d=n(3),m=n(0),h=n.n(m),g=n(1),f=n(112),p=n(20),y=n(5),b=n.n(y),v=n(26),E=n(11),k=(n(98),n(18)),w=n(84),S=n(85),C=n(87),x=n(82),_=n(86),T={apiKey:"AIzaSyCBZrwH6IoMDo-jW2Ydu00z0FJMK3wQdTI",authDomain:"timeblocks-bb1cc.firebaseapp.com",databaseURL:"https://timeblocks-bb1cc.firebaseio.com",projectId:"timeblocks-bb1cc",storageBucket:"timeblocks-bb1cc.appspot.com",messagingSenderId:"689367456633",appId:"1:689367456633:web:6cb0b27d54e4c45f9bada8",measurementId:"G-92KBT48GWG"},O=function t(n){var a=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Object(d.a)(this,t),this.firebase=e.firebase,this.fetchBlocks=Object(u.a)(l.a.mark((function e(){var t,n,r,o,s,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t="DD MM YYYY",!a.firebase||!a.username){e.next=15;break}return n=[],r=a.firebase.firestore().collection("blocks"),e.next=6,a.username?r.where("username","==",a.username).get():r.get();case 6:return e.sent.forEach((function(e){return n.push(Object(c.a)({id:e.id},e.data()))})),console.log("Log: Fetched ".concat(n.length," blocks"),n),o=n.filter((function(e){return b()(b()(e.startTime).format(t)).isSame(b()().format(t))})),s=n.filter((function(e){return!e.completed})),i=n.filter((function(e){return e.completed})),console.log("Log: Filtered ".concat(s.length," started blocks"),s),console.log("Log: Filtered ".concat(i.length," earned blocks"),i),e.abrupt("return",{startedBlocks:s,earnedBlocks:i,todaysBlocks:o});case 15:return e.abrupt("return",null);case 16:case"end":return e.stop()}}),e)}))),this.fetchGoals=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.firebase||!a.username){e.next=9;break}return t=[],n=a.firebase.firestore().collection("goals"),e.next=5,a.username?n.where("username","==",a.username).get():n.get();case 5:return e.sent.forEach((function(e){return t.push(Object(c.a)({},e.data(),{id:e.id}))})),console.log("Log: Fetched ".concat(t.length," goals"),t),e.abrupt("return",t);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e)}))),this.addTimeBlock=function(e){a.firebase&&a.username&&a.firebase.firestore().collection("blocks").add(Object(c.a)({},e,{username:a.username}))},this.addGoal=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.firebase||!a.username){e.next=3;break}return e.next=3,a.firebase.firestore().collection("goals").add(Object(c.a)({},t,{username:a.username}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.updateGoal=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.firebase||!a.username){e.next=3;break}return e.next=3,a.firebase.firestore().collection("goals").doc(t.id).update(Object(c.a)({},t,{username:a.username}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.setCurrentUser=function(e){e&&(a.user=e,a.username=e.uid)},this.firebase.initializeApp(n),this.firebase.analytics(),this.username=r},j=function t(){var n=this;Object(d.a)(this,t),this.firebase=e.firebase,this.operations={SignIn:"SignIn",SignUp:"SignUp"},this.signInListeners=[],this.signUpListeners=[],this.getCurrentUser=function(){return n.firebase.auth().currentUser},this.signUp=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){};n.firebase&&n.firebase.auth().createUserWithEmailAndPassword(e,t).then((function(e){console.log("Log: Auth - Signup success"),n._triggerListeners(n.operations.SignUp,e),a&&a(e)})).catch((function(e){var t=e.code,n=e.message;console.log("Error: Auth Signup - (".concat(t,") ").concat(n)),r&&r(n)}))},this.signIn=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){};n.firebase&&n.firebase.auth().signInWithEmailAndPassword(e,t).then((function(e){console.log("Log: Auth - Signin success"),n._triggerListeners(n.operations.SignIn,e),a&&a(e)})).catch((function(e){var t=e.code,n=e.message;console.log("Error: Auth Signin - (".concat(t,") ").concat(n)),r&&r(n)}))},this.signOut=function(){n.firebase&&n.firebase.auth().signOut().then((function(){console.log("Log: Auth - Signed Out")}),(function(e){console.error("Error: Auth - Sign Out Error",e)}))},this.onAuthStateChanged=function(e){n.firebase&&n.firebase.auth().onAuthStateChanged((function(t){return e(t)}))},this.onSignIn=function(e){return n.signInListeners.push(e)},this.onSignUp=function(e){return n.signUpListeners.push(e)},this._triggerListeners=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=[];switch(e){case n.operations.SignUp:a=n.signUpListeners;break;case n.operations.SignIn:a=n.signInListeners}var r,o=Object(s.a)(a);try{for(o.s();!(r=o.n()).done;){var i=r.value;i(t)}}catch(l){o.e(l)}finally{o.f()}},this._setAuthPersistence=function(){n.firebase&&n.firebase.auth().setPersistence(n.firebase.auth.Auth.Persistence.LOCAL).then((function(){return console.log("Log: Auth persistence set")})).catch((function(e){var t=e.code,n=e.message;console.log("Error: Auth Persistence - (".concat(t,") ").concat(n))}))},this.currentUser=this.firebase.auth().currentUser,this._setAuthPersistence()},B=function(t){Object(o.a)(s,t);var n=Object(r.a)(s);function s(t){var a;return Object(d.a)(this,s),(a=n.call(this,t)).firebase=e.firebase,a.render=function(){var e=a.state,t=e.currentUser;return e.authLoading?h.a.createElement("div",{className:"App"},h.a.createElement("div",{className:"App-header"},h.a.createElement(g.a,{style:{width:"100%",height:"100%",backgroundColor:"black"}}))):h.a.createElement(k.a.Provider,{value:{remoteService:a.service,authService:a.authService,currentUser:t}},h.a.createElement("div",{className:"App"},h.a.createElement("div",{className:"App-header"},h.a.createElement(v.a,null,h.a.createElement(g.a,{style:{height:f.a.get("window").height-60,width:"100%",display:"flex",alignItems:"center"}},h.a.createElement(E.d,null,h.a.createElement(E.b,{path:"/log"},h.a.createElement(C.a,null)),h.a.createElement(E.b,{path:"/goals"},h.a.createElement(S.a,null)),h.a.createElement(E.b,{path:"/settings"},h.a.createElement(_.a,null)),h.a.createElement(E.b,{path:"/auth"},h.a.createElement(x.a,null)),h.a.createElement(E.b,{path:"/"},h.a.createElement(w.a,null)))),null===t?h.a.createElement(E.a,{to:"/auth"}):h.a.createElement(E.a,{to:"/"}),null!==t?h.a.createElement(g.a,{style:{borderTop:"1px solid rgb(38,38,38)",width:"100%",position:"absolute",bottom:0,backgroundColor:"black",height:60,display:"flex",alignItems:"center"}},h.a.createElement(g.a,{style:{width:"100%",height:"100%",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"}},h.a.createElement(v.b,{to:"log".concat(window.location.search)},h.a.createElement(g.a,{style:{height:"100%",paddingHorizontal:10,width:80}},h.a.createElement(p.a,{style:{color:"#999999",fontSize:14}},"Log"))),h.a.createElement(v.b,{to:"/".concat(window.location.search)},h.a.createElement(g.a,{style:{height:"100%",paddingHorizontal:10,width:80}},h.a.createElement(p.a,{style:{color:"#999999",fontSize:14}},"Focus"))),h.a.createElement(v.b,{to:"goals".concat(window.location.search)},h.a.createElement(g.a,{style:{height:"100%",paddingHorizontal:10,width:80}},h.a.createElement(p.a,{style:{color:"#999999",fontSize:14}},"Goals"))),h.a.createElement(v.b,{to:"settings".concat(window.location.search)},h.a.createElement(g.a,{style:{height:"100%",paddingHorizontal:10,width:80}},h.a.createElement(p.a,{style:{color:"#999999",fontSize:14}},"Settings"))))):null))))},a._setCurrentUser=function(e){e&&e.email?(a.setState({currentUser:e.email}),a.service.setCurrentUser(e)):a.setState({currentUser:null})},a.state={currentUser:null,authLoading:!0},a}return Object(a.a)(s,[{key:"componentWillMount",value:function(){var e=this;this.service=new O(T),this.authService=new j,this.authService.onAuthStateChanged((function(t){console.log("Auth: Logged in user",t.uid),e._setCurrentUser(t),e.setState({authLoading:!1})}))}}]),s}(h.a.Component);t.a=B}).call(this,n(56))},82:function(e,t,n){"use strict";var a=n(63);n.d(t,"a",(function(){return a.a}))},83:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var a=n(3),r=n(8),o=n(9),s=n(10),i=n(0),l=n.n(i),c=n(1),u=n(54),d=n(20),m=n(60),h=n(7),g=n(33),f=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).state={isSignup:!0,email:null,password:null,repeatPassword:null,errorMessage:""},e._renderButtons=function(){return e.state.isSignup?e._renderSignupButtons():e._renderSigninButtons()},e._renderSignupButtons=function(){return l.a.createElement(c.a,null,l.a.createElement(u.a,{style:p.button,onPress:e._onSignup},l.a.createElement(d.a,{style:p.buttonText},"Create Account")),l.a.createElement(u.a,{style:p.subButton,onPress:function(){return e.setState({isSignup:!e.state.isSignup})}},l.a.createElement(d.a,{style:p.buttonText},"Login")))},e._renderSigninButtons=function(){return l.a.createElement(c.a,null,l.a.createElement(u.a,{style:p.button,onPress:e._onSignin},l.a.createElement(d.a,{style:p.buttonText},"Login")),l.a.createElement(u.a,{style:p.subButton,onPress:function(){return e.setState({isSignup:!e.state.isSignup})}},l.a.createElement(d.a,{style:p.buttonText},"Create Account")))},e._onSignup=function(){var t=e.props.onSignup,n=e.state,a=n.email,r=n.password,o=n.repeatPassword;return t?r!==o?e.setState({errorMessage:g.a.PasswordMismatch}):(t(a,r),void e.setState({errorMessage:""})):e.setState({errorMessage:g.a.Unexpected})},e._onSignin=function(){var t=e.props.onSignin,n=e.state,a=n.email,r=n.password;if(!t)return e.setState({errorMessage:g.a.Unexpected});t(a,r),e.setState({errorMessage:""})},e._onEmailChange=function(t){t&&t.target&&t.target.value&&e.setState({email:t.target.value}),e.setState({errorMessage:""})},e._onPasswordChange=function(t){t&&t.target&&t.target.value&&e.setState({password:t.target.value}),e.setState({errorMessage:""})},e._onRepeatPasswordChange=function(t){t&&t.target&&e.setState({repeatPassword:t.target.value}),e.setState({errorMessage:""})},e}return Object(r.a)(n,[{key:"render",value:function(){var e=this.state,t=e.email,n=e.isSignup,a=e.errorMessage;return l.a.createElement(c.a,{style:{width:"100%",maxWidth:267}},l.a.createElement(d.a,{style:p.appTitle},"TimeBlocks"),l.a.createElement(d.a,{style:p.subText},n?"Create a new account":"Login to your account"),l.a.createElement(m.a,{style:p.textInput,placeholder:"Email address",value:t,onChange:this._onEmailChange,autoFocus:!0,keyboardType:"email-address"}),l.a.createElement(m.a,{style:p.textInput,placeholder:"Password",onChange:this._onPasswordChange,autoCompleteType:"password",secureTextEntry:!0}),n&&l.a.createElement(m.a,{style:p.textInput,placeholder:"Repeat password",onChange:this._onRepeatPasswordChange,autoCompleteType:"password",secureTextEntry:!0}),l.a.createElement(c.a,{style:{height:30}},l.a.createElement(d.a,{style:p.errorMessage},a)),this._renderButtons())}}],[{key:"getDerivedStateFromProps",value:function(e){var t=e.error;return t?{errorMessage:t}:null}}]),n}(l.a.Component),p=h.a.create({appTitle:{color:"white",fontSize:30,marginTop:70,marginBottom:30},buttonText:{color:"white"},subText:{color:"rgb(153, 153, 153)"},textInput:{color:"white",paddingVertical:10,paddingHorizontal:10,marginTop:20,border:"1px solid rgb(38,38,38)"},button:{fontSize:16,marginTop:10,paddingVertical:10,backgroundColor:"rgb(209,63,87)"},subButton:{fontSize:14,marginTop:10,paddingVertical:10},errorMessage:{color:"rgb(209,63,87)",marginTop:10}})},84:function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var a=n(6),r=n(2),o=n.n(r),s=n(14),i=n(3),l=n(8),c=n(9),u=n(10),d=n(0),m=n.n(d),h=n(5),g=n.n(h),f=n(1),p=n(20),y=n(54),b=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){var a;Object(i.a)(this,n),(a=t.call(this,e)).intervalTimer=null,a.componentDidMount=function(){a.intervalTimer||(a.intervalTimer=setInterval(a._onIntervalFire,1e3))},a.componentWillUnmount=function(){return clearInterval(a.intervalTimer)},a._onIntervalFire=function(){var e=a.state,t=e.hours,n=e.minutes,r=e.seconds,o=e.running,s=a.props,i=s.onFinish,l=s.isCountUp,c=s.onTick;if(o){var u=l?function(e,t,n){if(59===n)return 59===t?59===e?null:{hours:e+1,minutes:0,seconds:0}:{hours:e,minutes:t+1,seconds:0};return{hours:e,minutes:t,seconds:n+1}}(t,n,r):function(e,t,n){if(0===n)return 0===t?0===e?null:{hours:e-1,minutes:59,seconds:59}:{hours:e,minutes:t-1,seconds:59};return{hours:e,minutes:t,seconds:n-1}}(t,n,r);u||(a.setState({running:!1}),i&&i()),a.setState({hours:u.hours,minutes:u.minutes,seconds:u.seconds},(function(){var e=a.state,t=e.hours,n=e.minutes,r=e.seconds;c&&c(t,n,r)}))}};var r=e.hours,o=e.minutes,s=e.seconds;return a.state={hours:r,minutes:o,seconds:s,running:!1},a}return Object(l.a)(n,[{key:"pad",value:function(e,t){return t=t||"0",(e+="").length>=2?e:new Array(2-e.length+1).join(t)+e}},{key:"render",value:function(){var e=this.state,t=e.hours,n=e.minutes,r=e.seconds,o={color:"#ccc"};return m.a.createElement("div",{style:{marginTop:20,marginBottom:10}},m.a.createElement("span",{style:this.props.small?Object(a.a)({fontSize:20},o):Object(a.a)({fontSize:40},o)},this.pad(t)," : ",this.pad(n)," : ",this.pad(r)))}}]),n}(m.a.Component);b.getDerivedStateFromProps=function(e){var t=e.hours,n=e.minutes,a=e.seconds,r=e.running,o=e.paused;return r||o?{running:r}:{hours:t,minutes:n,seconds:a,running:r}};var v=n(34),E=n(35),k=n(26),w=n(11),S=function(e){var t=e.onTimerTick,n=e.onTimerModify,a=e.onTimerFinish,r=e.onTimerStart,o=e.onTimerStop,s=e.running,i=e.earnedBlocks,l=e.currentBlock,c=e.goal;return m.a.createElement(f.a,{style:{display:"flex",flexDirection:"column",maxWidth:267,backgroundColor:"black",height:"100%",alignItems:"center",justifyContent:"center"}},m.a.createElement(f.a,{style:{paddingHorizontal:20,border:"1px solid rgb(38,38,38)",paddingBottom:15,paddingTop:5,minHeight:177}},m.a.createElement(b,{hours:1,minutes:0,seconds:0,running:s,paused:!1,onTick:t,onModify:n,onFinish:a}),m.a.createElement(p.a,{style:{color:"#999999",textAlign:"left",fontStyle:"oblique",fontSize:13}},"Focus on your task for 1 hour to earn ",m.a.createElement(p.a,{style:{color:"white",fontStyle:"oblique"}},"1 block"),m.a.createElement(p.a,{style:{fontWeight:"bold",color:"white",fontStyle:"normal"}}," ( "),m.a.createElement(f.a,{style:{height:10,width:10,backgroundColor:"rgb(97,196,85)"}}),m.a.createElement(p.a,{style:{fontWeight:"bold",color:"white",fontStyle:"normal"}}," )")),m.a.createElement(f.a,{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",marginTop:10}},m.a.createElement(p.a,{style:{color:"#999999"}},"Today's Goal ( "),m.a.createElement(k.b,{to:"/goals".concat(Object(w.h)().search),style:{marginBottom:5}},m.a.createElement(p.a,{style:{color:"rgb(209,63,87)"}},"Set")),m.a.createElement(p.a,{style:{color:"#999999"}}," )")),m.a.createElement(f.a,{style:{display:"flex",height:50,justifyContent:"center",alignItems:"center"}},s||0!==E.a.getTodaysBlockGoal(c)?m.a.createElement(v.a,{earnedBlocks:i,currentBlock:l,goal:c}):m.a.createElement(f.a,{style:{width:"100%",justifyContent:"center"}},m.a.createElement(p.a,{style:{color:"#999999"}},"No goal")))),m.a.createElement(f.a,{style:{marginVertical:40}},m.a.createElement(y.a,{style:{backgroundColor:s?"rgb(28,35,54)":"rgb(209,63,87)",borderRadius:80,width:80,height:80,display:"flex",justifyContent:"center",shadowColor:"rgba(0,0,0, .4)",shadowOffset:{height:1,width:1},shadowOpacity:1,shadowRadius:1,elevation:2},onPress:s?o:r},m.a.createElement(p.a,{style:{fontWeight:"bold",marginBottom:2,color:"white"}},s?"Give up":"Start"))))},C=n(18),x=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,l=new Array(r),c=0;c<r;c++)l[c]=arguments[c];return(e=t.call.apply(t,[this].concat(l))).state={hours:1,minutes:0,seconds:0,running:!1,isDistracted:!1,currentBlock:null,setHours:1,setMinutes:0,setSeconds:0,earnedBlocks:[],goal:null,dHours:0,dMinutes:0,dSeconds:0,distractions:[],workdayStartTime:null,workdayEndTime:null},e._getNumHourlyBlocksBetweenTimes=function(e,t){return g.a.duration(g()(t).diff(e)).asHours()},e._fetchBlocks=Object(s.a)(o.a.mark((function t(){var n,a,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.remoteService,t.next=3,n.fetchBlocks();case 3:a=t.sent,(r=a.todaysBlocks)&&e.setState({earnedBlocks:r.filter((function(e){return e.completed}))});case 6:case"end":return t.stop()}}),t)}))),e._fetchGoals=Object(s.a)(o.a.mark((function t(){var n,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.remoteService,t.next=3,n.fetchGoals();case 3:(a=t.sent)&&a.length&&e.setState({goal:a[0]});case 5:case"end":return t.stop()}}),t)}))),e._startBlock=function(){var t=e.state,n=t.running,a=t.isDistracted,r=t.distractions;a||e.setState({running:!n,distractions:n?r:[],currentBlock:{hours:1,minutes:0,seconds:0,createdAt:g()().toISOString(),startTime:g()().toISOString(),endTime:null,completed:!1}})},e._endBlock=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=e.state,r=a.hours,o=a.minutes,s=a.seconds;e.setState({running:!1,isDistracted:!1}),e._logTimeBlock(r,59-o,59-s,t,n)},e._onTimerTick=function(t,n,r){return e.setState({hours:t,minutes:n,seconds:r,currentBlock:Object(a.a)({},e.state.currentBlock,{hours:t,minutes:n,seconds:r})})},e._onTimerModify=function(t){var n=t.hours,a=t.minutes,r=t.seconds;return e.setState({hours:n,minutes:a,seconds:r,setHours:n,setMinutes:a,setSeconds:r})},e._onTimerFinish=function(){return e._endBlock(!0,!1)},e._renderEarnedBlocks=function(e){return m.a.createElement(v.a,{blocks:e})},e._logTimeBlock=function(t,n,r){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=e.state,l=i.setHours,c=i.setMinutes,u=i.setSeconds,d=i.currentBlock,m=i.goal,h=e.props.remoteService;h&&h.addTimeBlock(Object(a.a)({},d,{hours:l,minutes:c,seconds:u,elapsedHours:t,elapsedMinutes:n,elapsedSeconds:r,goal:m,endTime:g()().toISOString(),distractions:e.state.distractions,completed:o,stopped:s}))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this._fetchBlocks(),this._fetchGoals()}},{key:"render",value:function(){var e=this,t=this.state,n=t.running,a=t.currentBlock,r=t.earnedBlocks,o=t.goal;return m.a.createElement(S,{onTimerStart:this._startBlock,onTimerStop:function(){return e._endBlock(!1,!0)},onTimerTick:this._onTimerTick,onTimerModify:this._onTimerModify,onTimerFinish:this._onTimerFinish,running:n,currentBlock:a,earnedBlocks:r,goal:o})}}]),n}(m.a.Component),_=function(e){return m.a.createElement(C.a.Consumer,null,(function(t){var n=t.remoteService;return m.a.createElement(x,Object.assign({},e,{remoteService:n}))}))}},85:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var a=n(2),r=n.n(a),o=n(6),s=n(14),i=n(3),l=n(8),c=n(9),u=n(10),d=n(0),m=n.n(d),h=n(18),g=n(50),f=n(1),p=n(20),y=n(60),b=n(114),v=n(115),E=n(7),k="Everyday",w="WeekdayWeekend",S="Custom",C={mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Tuesday",fri:"Friday",sat:"Saturday",sun:"Sunday"},x=function(e){var t=e.blur,n=e.children;return m.a.createElement(f.a,{style:{opacity:t?.3:1}},n)},_=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r)))._onClearEveryday=function(){var t=e.props,n=t.onChangeGoal,a=t.onChangeGoalMode;n&&a?(a(null),n({everyday:null,mon:null,tue:null,wed:null,thu:null,fri:null,sat:null,sun:null})):console.log("Log _onClearEveryday: Props onChangeGoal and onChangeGoalMode are required")},e._onClearWeekdays=function(){var t=e.props,n=t.onChangeGoal,a=t.onChangeGoalMode;n&&a?(a(null),n({weekdays:null,mon:null,tue:null,wed:null,thu:null,fri:null})):console.log("Log _onClearWeekdays: Props onChangeGoal and onChangeGoalMode are required")},e._onClearWeekends=function(){var t=e.props,n=t.onChangeGoal,a=t.onChangeGoalMode;n&&a?(a(null),n({weekends:null,sat:null,sun:null})):console.log("Log _onClearWeekends: Props onChangeGoal and onChangeGoalMode are required")},e._onClickSection=function(t){var n=e.props.onChangeGoalMode;n&&n(t)},e._onClearCustom=function(){var t=e.props,n=t.onChangeGoal,a=t.onChangeGoalMode;n&&a?(n({mon:null,tue:null,wed:null,thu:null,fri:null,sat:null,sun:null}),a(null)):console.log("Log _onClearCustom: Props onChangeGoal and onChangeGoalMode are required")},e._renderDay=function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=e.props.goal;return m.a.createElement(f.a,{style:T.form},m.a.createElement(f.a,{style:T.formLabel},m.a.createElement(p.a,{style:T.text},C[t])),m.a.createElement(f.a,{style:T.formInput},e._renderTextInput(a[t],S,(function(n){return e._onSetValue(n,t)}),n)),m.a.createElement(f.a,{style:T.clearButton}))},e._renderTextInput=function(t,n,a){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return n===e.props.goalMode?m.a.createElement(y.a,{value:t,style:T.formTextInput,onChange:a,autoFocus:r,keyboardType:"numeric"}):m.a.createElement(p.a,{style:T.text},null!==t?t:"Not set")},e._onSetValue=function(t,n){var a=e.props.onChangeGoal;if(a){var r=t&&t.target&&t.target.value;if(n){var o=0===r.length||isNaN(parseInt(r))?null:parseInt(r);switch(n){case"everyday":a({everyday:o,mon:o,tue:o,wed:o,thu:o,fri:o,sat:o,sun:o});break;case"weekdays":a({weekdays:o,mon:o,tue:o,wed:o,thu:o,fri:o});break;case"weekends":a({weekends:o,sat:o,sun:o});break;default:a(Object(g.a)({},n,o))}}}},e._unsetAllWithOverride=function(t){return e.props.onChangeGoal&&e.props.onChangeGoal(Object(o.a)({everyday:null,weekdays:null,weekends:null},t||{}))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.goalMode,a=t.goal,r=t.onChangeGoalMode,o=t.onSaveGoal;return m.a.createElement(b.a,{onPress:function(){return r(null)}},m.a.createElement(f.a,{style:{width:"100%"}},m.a.createElement(p.a,{style:{color:"rgb(204, 204, 204)",fontSize:30,textAlign:"center",marginVertical:15,marginHorizontal:40,fontWeight:"bold"}},"Log"),m.a.createElement(f.a,{style:{paddingTop:10,width:"100%",display:"flex",alignItems:"center",marginHorizontal:5}},m.a.createElement(f.a,{style:{maxWidth:267,height:"100%",width:"100%"}},m.a.createElement(x,{blur:n!==k},m.a.createElement(b.a,{onPress:function(){return e._onClickSection(k)}},m.a.createElement(f.a,{style:T.form},m.a.createElement(f.a,{style:T.formLabel},m.a.createElement(p.a,{style:T.text},"Everyday")),m.a.createElement(f.a,{style:T.formInput},this._renderTextInput(a.everyday,k,(function(t){return e._onSetValue(t,"everyday")}),!0)),m.a.createElement(v.a,{style:T.clearButton,onPress:this._onClearEveryday},m.a.createElement(p.a,{style:T.text},"Clear"))))),m.a.createElement(f.a,{style:{marginTop:10,marginBottom:10}},m.a.createElement(p.a,null,"OR")),m.a.createElement(x,{blur:n!==w},m.a.createElement(b.a,{onPress:function(){return e._onClickSection(w)}},m.a.createElement(f.a,null,m.a.createElement(f.a,{style:T.form},m.a.createElement(f.a,{style:T.formLabel},m.a.createElement(p.a,{style:T.text},"Weekdays")),m.a.createElement(f.a,{style:T.formInput},this._renderTextInput(a.weekdays,w,(function(t){return e._onSetValue(t,"weekdays")}),!0)),m.a.createElement(v.a,{style:T.clearButton,onPress:this._onClearWeekdays},m.a.createElement(p.a,{style:T.text},"Clear"))),m.a.createElement(f.a,{style:T.form},m.a.createElement(f.a,{style:T.formLabel},m.a.createElement(p.a,{style:T.text},"Weekends")),m.a.createElement(f.a,{style:T.formInput},this._renderTextInput(a.weekends,w,(function(t){return e._onSetValue(t,"weekends")}))),m.a.createElement(v.a,{style:T.clearButton,onPress:this._onClearWeekends},m.a.createElement(p.a,{style:T.text},"Clear")))))),m.a.createElement(f.a,{style:{width:"100%",height:1,borderBottom:"1px solid black",marginTop:10}}),m.a.createElement(b.a,{onPress:function(){return e._onClickSection(S)}},m.a.createElement(f.a,null,m.a.createElement(f.a,{style:{display:"flex",flexDirection:"row",marginVertical:10,justifyContent:"center",position:"relative"}},m.a.createElement(p.a,{style:T.text},"Set Goals"),m.a.createElement(v.a,{style:{position:"absolute",right:0,width:"20%"},onPress:this._onClearCustom},m.a.createElement(p.a,{style:T.text},"Clear"))),m.a.createElement(f.a,null,this._renderDay("mon",!0),this._renderDay("tue"),this._renderDay("wed"),this._renderDay("thu"),this._renderDay("fri"),this._renderDay("sat"),this._renderDay("sun")))),m.a.createElement(v.a,{style:{marginVertical:30},onPress:o},m.a.createElement(f.a,{style:{backgroundColor:"rgb(209,63,87)",paddingVertical:5}},m.a.createElement(p.a,{style:T.text},"Save")))))))}}]),n}(m.a.Component),T=E.a.create({container:{display:"flex",flexDirection:"column",width:267,height:"100%",backgroundColor:"black",paddingVertical:20},titleText:{color:"white",fontSize:26,marginVertical:10},form:{display:"flex",flexDirection:"row",justifyContent:"center"},formLabel:{width:"50%",textAlign:"left",paddingLeft:10},formInput:{width:"30%",paddingRight:10},clearButton:{width:"20%"},formTextInput:{color:"white",textAlign:"center",borderBottom:"1px solid black"},text:{color:"white"}}),O=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];return(e=t.call.apply(t,[this].concat(l))).state={goals:[],id:null,goalMode:null,everyday:null,weekdays:null,weekends:null,mon:null,tue:null,wed:null,thu:null,fri:null,sat:null,sun:null},e.render=function(){var t=e.state,n=t.goalMode,a=t.everyday,r=t.weekdays,o=t.weekends,s=t.mon,i=t.tue,l=t.wed,c=t.thu,u=t.fri,d=t.sat,h=t.sun;return m.a.createElement(_,{goalMode:n,goal:{everyday:a,weekdays:r,weekends:o,mon:s,tue:i,wed:l,thu:c,fri:u,sat:d,sun:h},onChangeGoal:e._onChangeGoal,onChangeGoalMode:e._onChangeGoalMode,onSaveGoal:e._onSaveGoal})},e._getCurrentGoal=function(){return{id:e.state.id,everyday:e.state.everyday,weekdays:e.state.weekdays,weekends:e.state.weekends,mon:e.state.mon,tue:e.state.tue,wed:e.state.wed,thu:e.state.thu,fri:e.state.fri,sat:e.state.sat,sun:e.state.sun}},e._onSaveGoal=function(){var t=e.props.remoteService;t&&(e.state.id?t.updateGoal(e._getCurrentGoal()):t.addGoal(e._getCurrentGoal()))},e._fetchGoals=Object(s.a)(r.a.mark((function t(){var n,a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=e.props.remoteService)){t.next=6;break}return t.next=4,n.fetchGoals();case 4:(a=t.sent)&&a.length>0&&(console.log(">>>",a[0]),e.setState(Object(o.a)({goals:a},a[0])));case 6:case"end":return t.stop()}}),t)}))),e._onChangeGoalMode=function(t){return e.setState({goalMode:t})},e._onChangeGoal=function(t){return e.setState(Object(o.a)({},t))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this._fetchGoals()}}]),n}(m.a.Component),j=function(e){return m.a.createElement(h.a.Consumer,null,(function(t){var n=t.remoteService;return m.a.createElement(O,Object.assign({},e,{remoteService:n}))}))}},86:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var a=n(3),r=n(9),o=n(10),s=n(0),i=n.n(s),l=n(18),c=n(1),u=n(20),d=n(54),m=n(7),h=function(e){var t=e.onSignOut;return i.a.createElement(c.a,{style:g.container},i.a.createElement(u.a,{style:g.screenTitle},"Settings"),i.a.createElement(c.a,{style:g.settingItem},i.a.createElement(c.a,{style:g.centeredSetting},i.a.createElement(d.a,{onPress:t},i.a.createElement(c.a,null,i.a.createElement(u.a,{style:g.text},"Sign out"))))))},g=m.a.create({container:{width:"100%",maxWidth:267},screenTitle:{color:"rgb(204, 204, 204)",fontSize:30,textAlign:"center",marginVertical:15,marginHorizontal:40,fontWeight:"bold"},centeredSetting:{display:"flex",justifyContent:"center",flexDirection:"row"},text:{color:"white"}}),f=function(e){Object(o.a)(n,e);var t=Object(r.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).render=function(){return i.a.createElement(h,{onSignOut:e._onSignOut})},e._onSignOut=function(){var t=e.props.authService;t&&t.signOut()},e}return n}(i.a.Component),p=function(e){return i.a.createElement(l.a.Consumer,null,(function(t){var n=t.authService;return i.a.createElement(f,Object.assign({},e,{authService:n}))}))}},87:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var a=n(59),r=n(48),o=n(2),s=n.n(o),i=n(14),l=n(3),c=n(8),u=n(9),d=n(10),m=n(0),h=n.n(m),g=n(5),f=n.n(g),p=n(1),y=n(20),b=n(18),v=n(112),E=n(34),k=n(35),w=function(e){var t=e.day,n=e.goal,a=t.blocks.filter((function(e){return e.completed})),r=1*a.length,o=k.a.getTodaysBlockGoal(n),s=t.blocks&&t.blocks.length>0?r/(o>0?o:1)*100:0;return h.a.createElement(p.a,{style:{height:90,borderBottom:"1px solid rgb(38,38,38)",paddingTop:10,width:"100%",display:"flex",alignItems:"center",marginHorizontal:5}},h.a.createElement(p.a,{style:{maxWidth:267,height:"100%",width:"100%"}},h.a.createElement(p.a,{style:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"}},h.a.createElement(y.a,{style:{color:"white",fontSize:17}},f()(t.date).format("D MMMM YYYY")),h.a.createElement(y.a,{style:{color:"white",fontSize:10}},"Sessions: ",t.blocks&&t.blocks.length>0?t.blocks.length:"N/A")),h.a.createElement(p.a,{style:{display:"flex",flexDirection:"row",width:"100%",justifyContent:"space-between",marginTop:10}},h.a.createElement(p.a,{style:{display:"flex",width:"75%"}},h.a.createElement(E.a,{earnedBlocks:a,goal:n})),h.a.createElement(p.a,{style:{display:"flex",alignItems:"center",marginLeft:5}},h.a.createElement(y.a,{style:{color:"white",fontSize:16}},s.toFixed(0),"%")))))},S=function(e){var t=e.days,n=e.goal;return h.a.createElement(p.a,{style:{display:"flex",flexDirection:"column",height:v.a.get("window").height-60,overflow:"scroll",width:"100%",alignItems:"center",backgroundColor:"black",paddingBottom:60}},t.map((function(e){return h.a.createElement(w,{day:e,goal:n})})))},C=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={startedBlocks:[],earnedBlocks:[],goal:null},e._fetchBlocks=Object(i.a)(s.a.mark((function t(){var n,a,r,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=e.props.remoteService)){t.next=8;break}return t.next=4,n.fetchBlocks();case 4:a=t.sent,r=a.startedBlocks,o=a.earnedBlocks,e.setState({startedBlocks:r,earnedBlocks:o});case 8:case"end":return t.stop()}}),t)}))),e._fetchGoal=Object(i.a)(s.a.mark((function t(){var n,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.remoteService,t.next=3,n.fetchGoals();case 3:(a=t.sent)&&a.length>0&&e.setState({goal:a[0]});case 5:case"end":return t.stop()}}),t)}))),e._getDays=function(e){var t,n={},a=null,o=null,s=Object(r.a)(e);try{for(s.s();!(t=s.n()).done;){var i=t.value,l=f()(i.startTime),c=l.format("DD MM YYYY"),u=n[c];u?u.blocks.push(i):n[c]={date:i.startTime,blocks:[i]},a||(a=i.startTime),o||(o=i.startTime),l.isBefore(f()(a))&&(a=i.startTime),l.isAfter(f()(a))&&(o=i.startTime)}}catch(d){s.e(d)}finally{s.f()}return Object.keys(n).sort((function(e,t){return f()(e,"DD MM YYY")-f()(t,"DD MM YYYY")})).map((function(e){return n[e]}))},e._getContiguousDays=function(e,t){for(var n=[],a=f()(e);a.format("DD MM YYYY")!==f()(t).format("DD MM YYYY");)n.push(a.format("DD MM YYYY")),a=a.add(1,"days");return n},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._fetchBlocks(),this._fetchGoal();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.startedBlocks,n=e.earnedBlocks,r=e.goal;return h.a.createElement(p.a,{style:{width:"100%"}},h.a.createElement(y.a,{style:{color:"rgb(204, 204, 204)",fontSize:30,textAlign:"center",marginVertical:15,marginHorizontal:40,fontWeight:"bold"}},"Log"),h.a.createElement(S,{days:this._getDays([].concat(Object(a.a)(t),Object(a.a)(n))),goal:r}))}}]),n}(h.a.Component),x=function(e){return h.a.createElement(b.a.Consumer,null,(function(t){var n=t.remoteService;return h.a.createElement(C,Object.assign({},e,{remoteService:n}))}))}},89:function(e,t,n){e.exports=n(90)},90:function(e,t,n){"use strict";n.r(t);n(0),n(21),n(95);var a=n(64),r=n(88);r.a.registerComponent("App",(function(){return a.a})),r.a.runApplication("App",{initialProps:{},rootTag:document.getElementById("root")})},95:function(e,t,n){},98:function(e,t,n){}},[[89,1,2]]]);
//# sourceMappingURL=main.1cd65a15.chunk.js.map